---
title: "Лабораторная работа №7 - Команды безусловного и условного переходов в Nasm"
subtitle: "Программирование ветвлений"
author: "Сунь Шэнцзе"
date: "23 ноября 2025 года"
---

# Цель работы

- Изучение команд условного и безусловного переходов
- Приобретение навыков написания программ с использованием переходов
- Знакомство с назначением и структурой файла листинга

# Порядок выполнения работы

## Шаг 1: Создание рабочего каталога

![Создание каталога](screenshots/1.png)

**Основное:** Успешное создание рабочего каталога `~/work/arch-pc/lab07` и переход в него, подготовка к выполнению лабораторной работы.

## Шаг 2: Создание первого файла программы

![Создание файла](screenshots/1.png)

**Основное:** Использование команды `touch` для успешного создания файла `lab7-1.asm`, подготовка к написанию первой программы с командами перехода.

## Шаг 3: Написание начального кода программы

![Начальный код](screenshots/2.png)

**Основное:** Ввод кода программы с командой безусловного перехода `jmp` в файл `lab7-1.asm`, программа содержит три строки сообщений и соответствующие метки.

## Шаг 4: Компиляция и запуск первой программы

![Результат первого запуска](screenshots/3.png)

**Основное:** Успешная компиляция и запуск программы, вывод показывает выполнение начиная с `_label2`, пропуская сообщение `_label1`, подтверждение эффекта команды `jmp`.

## Шаг 5: Модификация программы для изменения порядка вывода

![Модифицированный код](screenshots/4.png)
![Модифицированный код](screenshots/5.png)

**Основное:** Изменение кода программы, добавление дополнительных команд `jmp` для изменения потока выполнения, реализация обратного порядка вывода сообщений.

## Шаг 6: Повторная компиляция модифицированной программы

![Результат модифицированного запуска](screenshots/6.png)

**Основное:** Повторная компиляция и запуск модифицированной программы, успешная реализация обратного вывода сообщений (сообщение 3→сообщение 2→сообщение 1), проверка функциональности обратного перехода.

## Шаг 7: Создание второй программы lab7-2.asm

![Создание lab7-2](screenshots/9.png)

**Основное:** Создание второго файла программы `lab7-2.asm`, подготовка к написанию программы сравнения трех значений и поиска максимального.

## Шаг 8: Написание программы сравнения трех чисел

![Код lab7-2](screenshots/7.png)
![Код lab7-2](screenshots/8.png)

**Основное:** Написание программы с командами условного перехода, реализация сравнения переменных A, B, C и поиска максимального значения, использование команд `cmp` и условных переходов.

## Шаг 9: Компиляция и запуск lab7-2.asm

![Запуск lab7-2](screenshots/9.png)

**Основное:** Успешная компиляция и запуск программы, программа принимает ввод пользователя для B, сравнивает с预设ными значениями A и C, корректно выводит максимальное значение.

## Шаг 10: Генерация файла листинга

![Генерация листинга](screenshots/10.png)

**Основное:** Использование команды `nasm -f elf -l lab7-2.lst lab7-2.asm` для успешной генерации файла листинга, подготовка к анализу структуры программы.

## Шаг 11: Просмотр содержимого файла листинга

![Содержимое листинга](screenshots/10.png)
![Содержимое листинга](screenshots/11.png)
![Содержимое листинга](screenshots/12.png)
![Содержимое листинга](screenshots/13.png)

**Основное:** Просмотр содержимого файла листинга, четкое отображение номеров строк, смещений адресов, машинного кода и соответствующего исходного кода, удобство для анализа и отладки программы.

## Шаг 12: Намеренное создание ошибки для наблюдения

![Сообщение об ошибке](screenshots/14.png)

**Основное:** Намеренное удаление операндов в инструкциях для создания ошибки, наблюдение за сообщениями об ошибках ассемблера, понимание механизма обработки ошибок.

# Выполнение самостоятельной работы

## Задание 1: Поиск минимального из трех чисел

![Код программы минимума](screenshots/15.png)

**Основное:** Написание программы для поиска минимального из трех чисел, использование команд условного перехода для реализации логики сравнения, переменные a=17, b=23, c=45.

![Запуск программы минимума](screenshots/16.png)

**Основное:** Успешный запуск программы и корректный вывод минимального значения 17, проверка правильности применения команд условного перехода в логике сравнения.

## Задание 2: Вычисление функции f(x)

![Код программы функции](screenshots/17.png)
![Код программы функции](screenshots/18.png)

**Основное:** Написание программы вычисления кусочной функции, вычисление f(x) в зависимости от значений x и a, использование условных переходов для реализации ветвления.

### Тестовая точка 1: (x=1, a=2)

![Тестовая точка 1](screenshots/19.png)

**Основное:** Тестовая точка 1: x=1, a=2, удовлетворяет условию x<a, вычисление f(x)=2×2-1=3, программа корректно выводит результат 3.

### Тестовая точка 2: (x=2, a=1)

![Тестовая точка 2](screenshots/19.png)

**Основное:** Тестовая точка 2: x=2, a=1, удовлетворяет условию x≥a, программа корректно выводит f(x)=8, проверка правильности ветви else.

# Вопросы и ответы

## 1. Что такое команда безусловного перехода? Приведите пример.
Команда безусловного перехода - это инструкция `jmp`, которая безусловно переходит к указанной метке или адресу выполнения. Например: `jmp _label1` непосредственно переходит к метке `_label1` для выполнения.

## 2. От чего зависят команды условного перехода?
Команды условного перехода зависят от состояния флагов в регистре флагов, включая флаг нуля (ZF), флаг переноса (CF), флаг знака (SF), флаг переполнения (OF) и другие.

## 3. Какова роль команды сравнения cmp?
Команда cmp сравнивает два операнда, выполняет операцию op2 - op1, устанавливает флаги на основе результата, но не сохраняет результат вычислений.

## 4. Какую информацию содержит файл листинга?
Файл листинга содержит номера строк, смещения адресов, машинный код и соответствующий исходный код, используется для отладки и анализа программы.

## 5. Что означает следующая инструкция: je label
Переход к метке label, когда флаг нуля ZF=1, то есть когда результат предыдущей операции равен 0.

## 6. Как сгенерировать файл листинга?
Использовать команду: `nasm -f elf -l filename.lst filename.asm`

## 7. В чем основное различие между безусловным и условным переходами?
Безусловный переход всегда выполняет переход, а условный переход выполняет переход только при выполнении определенных условий.

## 8. Какие флаги в регистре флагов часто используются для условных переходов?
ZF (флаг нуля), CF (флаг переноса), SF (флаг знака), OF (флаг переполнения).

# Выводы по работе

В ходе данной лабораторной работы я успешно приобрел следующие навыки:

1. **Применение команд безусловного перехода:** Научился использовать инструкцию `jmp` для реализации безусловных переходов в программном потоке, возможность гибкого управления порядком выполнения программы.

2. **Освоение команд условного перехода:** Понял сценарии использования различных команд условного перехода (je, jne, jg, jl и др.) и механизм условных проверок.

3. **Понимание регистра флагов:** Глубоко изучил значение и роль различных флагов в регистре флагов, возможность выполнения условных проверок на основе состояния флагов.

4. **Генерация и анализ файлов листинга:** Научился генерировать файлы листинга и понимать их структуру, возможность анализа машинного кода программы и распределения адресов через файлы листинга.

5. **Способность проектирования разветвленных программ:** Возможность проектирования и реализации программ на ассемблере со сложной логикой ветвления, решение практических задач.

6. **Отладка и обработка ошибок:** Освоил методы отладки программ через анализ флагов и файлов листинга.

**Достижение целей работы:** Все цели лабораторной работы достигнуты. Я уверенно освоил использование команд безусловного и условного переходов, возможность написания сложных разветвленных программ и понимание структуры и назначения файлов листинга. Завершение самостоятельной работы дополнительно укрепило полученные знания, сформировалась способность самостоятельного проектирования и реализации разветвленных программ на ассемблере.
